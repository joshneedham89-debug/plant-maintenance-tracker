<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Plant Maintenance Tracker</title>

  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="app-container">

    <!-- ================= HEADER ================= -->
    <header class="app-header">
      <img src="icons/icon-192.png" class="logo" alt="Logo">
      <h1>Plant Maintenance Tracker</h1>
    </header>

    <!-- ================= DASHBOARD ================= -->
    <section id="dashboardScreen" class="screen active">
      <h2 class="section-title">Dashboard</h2>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-label">OK</div>
          <div id="okCount" class="stat-value">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Due Soon</div>
          <div id="dueCount" class="stat-value">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Overdue</div>
          <div id="overCount" class="stat-value">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Tons Run</div>
          <div id="tonsRun" class="stat-value">0</div>
        </div>
      </div>
    </section>

    <!-- ================= MAINTENANCE ================= -->
    <section id="maintenanceScreen" class="screen">
      <h2 class="section-title">Maintenance</h2>

      <!-- Parts header -->
      <div class="card maintenance-header">
        <input id="searchPartsInput" type="text" placeholder="Search parts">
        <select id="filterCategory"></select>
        <button id="addPartBtn" class="primary-btn full">+ Add Part</button>
      </div>

      <!-- ================= PMs (NEW SECTION) ================= -->
      <div class="card">
        <div class="row space-between">
          <h3>Preventive Maintenance (PMs)</h3>
          <button id="openPmPanelBtn" class="secondary-btn">+ Add PM</button>
        </div>

        <div class="pm-filters">
          <button class="pm-filter active" data-pmfilter="ALL">All</button>
          <button class="pm-filter" data-pmfilter="Cold Feed">Cold Feed</button>
          <button class="pm-filter" data-pmfilter="RAP">RAP</button>
          <button class="pm-filter" data-pmfilter="Drum">Drum</button>
          <button class="pm-filter" data-pmfilter="Drag">Drag</button>
          <button class="pm-filter" data-pmfilter="Silos">Silos</button>
          <button class="pm-filter" data-pmfilter="Scales">Scales</button>
        </div>

        <div id="pmsList"></div>
      </div>

      <!-- ================= PARTS LIST ================= -->
      <div id="partsList"></div>
    </section>

    <!-- ================= INVENTORY ================= -->
    <section id="inventoryScreen" class="screen">
      <h2 class="section-title">Inventory</h2>
      <input id="searchInventoryInput" type="text" placeholder="Search inventory">
      <button id="addInventoryBtn" class="primary-btn full">+ Add Inventory</button>
      <div id="inventoryList"></div>
    </section>

    <!-- ================= SETTINGS ================= -->
    <section id="settingsScreen" class="screen">
      <h2 class="section-title">Settings</h2>
      <button id="exportBtn" class="primary-btn full">Export Data</button>
      <button id="resetAllBtn" class="danger-btn full">Reset App</button>
    </section>

    <!-- ================= NAV ================= -->
    <nav class="bottom-nav">
      <button class="nav-btn active" data-screen="dashboardScreen">üè†<br>Home</button>
      <button class="nav-btn" data-screen="maintenanceScreen">üõ†Ô∏è<br>Maint</button>
      <button class="nav-btn" data-screen="inventoryScreen">üì¶<br>Inv</button>
      <button class="nav-btn" data-screen="settingsScreen">‚öôÔ∏è<br>Settings</button>
    </nav>

  </div>

  <!-- ================= PM ADD / EDIT PANEL ================= -->
  <div id="pmPanelOverlay" class="panel-overlay hidden">
    <div id="pmPanel" class="slide-panel">
      <div class="slide-panel-header">
        <h3 id="pmPanelTitle">Add PM</h3>
        <button id="closePmPanel" class="close-btn">‚úñ</button>
      </div>

      <div class="slide-panel-body">
        <label>Area</label>
        <select id="pmArea">
          <option>Cold Feed</option>
          <option>RAP</option>
          <option>Drum</option>
          <option>Drag</option>
          <option>Silos</option>
          <option>Scales</option>
        </select>

        <label>PM Name</label>
        <input id="pmName" type="text">

        <label>Frequency</label>
        <select id="pmFrequency">
          <option>Daily</option>
          <option selected>Weekly</option>
          <option>Monthly</option>
          <option>Custom</option>
        </select>

        <label id="pmCustomDaysLabel" class="hidden">Custom Days</label>
        <input id="pmCustomDays" type="number" class="hidden">

        <label>Notes</label>
        <input id="pmDefNotes" type="text">

        <button id="savePmBtn" class="primary-btn full">Save PM</button>
      </div>
    </div>
  </div>

  <!-- ================= PM COMPLETE PANEL ================= -->
  <div id="pmCompleteOverlay" class="panel-overlay hidden">
    <div id="pmCompletePanel" class="slide-panel">
      <div class="slide-panel-header">
        <h3 id="pmCompleteTitle">Complete PM</h3>
        <button id="closePmComplete" class="close-btn">‚úñ</button>
      </div>

      <div class="slide-panel-body">
        <label>Date</label>
        <input id="pmCompDate" type="date">

        <label>Notes</label>
        <input id="pmCompNotes" type="text">

        <h4>Photos (optional)</h4>
        <button id="pmAddPhotoBtn" class="secondary-btn full">+ Add Photo</button>
        <input id="pmPhotoInput" type="file" multiple accept="image/*" class="file-hidden">
        <div id="pmPhotoPreview"></div>

        <button id="savePmCompletionBtn" class="primary-btn full">Save PM</button>
      </div>
    </div>
  </div>

  <!-- ================= SCRIPTS ================= -->
  <script src="inventory.js"></script>
  <script src="script.js"></script>

</body>
</html>
