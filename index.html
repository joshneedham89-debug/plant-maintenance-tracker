<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Plant Maintenance Tracker</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0f1724" />

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />

  <!-- Icons -->
  <link rel="icon" sizes="192x192" href="icons/icon-192.png" />
  <link rel="icon" sizes="512x512" href="icons/icon-512.png" />

  <!-- Service Worker -->
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () =>
        navigator.serviceWorker.register("service-worker.js")
      );
    }
  </script>
</head>

<body>
  <div id="app">

    <!-- HEADER -->
    <header class="top-header">
      <img src="icons/icon-192.png" class="app-logo" alt="App Logo" />
      <h1>Plant Maintenance Tracker</h1>
    </header>

    <!-- MAIN SCREENS -->
    <main>

      <!-- HOME SCREEN -->
      <section id="screen-home" class="screen active">

        <div class="summary-box">
          <div class="summary-item" id="okCount">ğŸŸ¢ OK: 0</div>
          <div class="summary-item" id="dueCount">ğŸŸ¡ Due: 0</div>
          <div class="summary-item" id="overCount">ğŸ”´ Overdue: 0</div>
        </div>

        <div class="tons-box">
          <label>Current Tons:</label>
          <input id="currentTons" type="number" inputmode="numeric" />
          <button id="updateTonsBtn">Update</button>
        </div>

        <div class="quick-stats">
          <div class="stat">Total Parts<br><span id="totalParts">0</span></div>
          <div class="stat">Tons Run<br><span id="tonsRun">0</span></div>
          <div class="stat">Next Due<br><span id="nextDue">â€”</span></div>
        </div>

        <button id="openAddPartModal" class="primary-btn full">+ Add Part</button>

        <div class="filter-row">
          <select id="categoryFilter"></select>
          <button id="addCategoryBtn" class="small-btn">+ Category</button>
        </div>

        <div id="partsList" class="parts-list"></div>
      </section>


      <!-- INVENTORY SCREEN -->
      <section id="screen-inventory" class="screen">
        <h2>Inventory</h2>
        <p class="inv-sub">Reference inventory parts.</p>
        <div id="inventoryList" class="inventory-list"></div>
      </section>


      <!-- ADD PART SCREEN -->
      <section id="screen-add" class="screen">
        <h2>Add Part</h2>
        <button id="openAddPartModal2" class="primary-btn full">+ Add New Part</button>
      </section>


      <!-- SETTINGS SCREEN -->
      <section id="screen-settings" class="screen">
        <h2>Settings</h2>

        <label class="toggle-row">
          <input type="checkbox" id="themeToggle" />
          <span>Light Mode</span>
        </label>

        <h3>Tons Controls</h3>
        <button id="setTonsBtn" class="secondary-btn">Set Tons Value</button>
        <button id="resetTonsBtn" class="secondary-btn red">Reset Tons</button>

        <h3>Data</h3>
        <button id="exportBtn" class="secondary-btn">Export Backup</button>
        <button id="resetBtn" class="secondary-btn red">Reset ALL Data</button>
      </section>


      <!-- ABOUT SCREEN -->
      <section id="screen-about" class="screen">
        <h2>About</h2>
        <p>Plant Maintenance Tracker</p>
        <p>Version 5.0</p>
        <p>Designed for offline use.</p>
      </section>

    </main>

    <!-- BOTTOM NAV -->
    <nav class="bottom-nav">
      <button data-screen="home"><span class="nav-icon">ğŸ </span></button>
      <button data-screen="inventory"><span class="nav-icon">ğŸ“¦</span></button>
      <button data-screen="add"><span class="nav-icon">â•</span></button>
      <button data-screen="settings"><span class="nav-icon">âš™ï¸</span></button>
      <button data-screen="about"><span class="nav-icon">â“</span></button>
    </nav>
  </div>


  <!-- PART MODAL -->
  <div id="partModal" class="modal">
    <div class="modal-content">

      <h2 id="modalTitle">Add Part</h2>

      <label>Category</label>
      <select id="partCategory"></select>

      <label>Part Name</label>
      <input id="partName" />

      <label>Section</label>
      <input id="partSection" />

      <label>Last Maintenance Date</label>
      <input id="partDate" type="date" />

      <button id="moreToggle" class="small-btn">More â–¼</button>

      <div id="moreOptions" style="display:none">
        <label>Interval (days)</label>
        <input id="partDays" type="number" />

        <label>Last Tons</label>
        <input id="partLastTons" type="number" />

        <label>Ton Interval</label>
        <input id="partTonInterval" type="number" />

        <label>Notes</label>
        <textarea id="partNotes"></textarea>
      </div>

      <div class="modal-actions">
        <button id="savePartBtn" class="primary-btn">Save</button>
        <button id="cancelPartBtn" class="secondary-btn">Cancel</button>
      </div>

    </div>
  </div>

  <!-- SCRIPTS -->
  <script src="inventory.js"></script>
  <script src="script.js"></script>

</body>
</html>
